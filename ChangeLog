===============================================================================
$Id$
$URL$

ALL CHANGES SHOULD OCCUR BELOW THIS LINE
===============================================================================
New Checkin: mlevy
Date:        06 Feb 2013
Summary:     More Makefile improvements - no need to include kinds_and_types
             in libcvmix.a (because there are no functions or routines)... so
             no more "ranlib ... has no symbols" warning. Also moved finished
             two and a half of the four tasks mentioned in the previous commit:

             * build executable in bin/ rather than bld/exe
               - This required changing all the reg_test scripts
             * build libcvmix.a in lib/ rather than src/shared
               - This required a few changes in the Makefiles
             * Change some variable names to be consistent with how Makefiles
               usually work: add the keyword DIR to variables that are directory
               names.
               - If you want to build libcvmix.a (to link to an ocean model, for
                 example), you should start in $CVMIX/src/shared and run
                 $ make LIB_DIR=[where you want libcvmix.a] \
                        OBJ_DIR=[where you want .o and .mod files]
                 By default, LIB_DIR = $CVMIX/lib and OBJ_DIR=$CVMIX/bld/obj

             I think the next commit will include moving bld/Makefile to
             src/Makefile and renaming Makefile variables. I'm also tempted
             to have the default behavior of the standalone driver makefile
             be to build every standalone driver rather than to prompt you
             to specify which driver file to use, but that will be a topic
             for a Monday telecon.

Files Modified:
M       reg_tests/tidal-Simmons/Simmons-test.sh
M       reg_tests/double_diff/double_diff-test.sh
M       reg_tests/shear-KPP/Large_test.sh
M       reg_tests/Bryan-Lewis/BL_test.sh
D       bld/exe
M       bld/CompileFlags.mak
M       bld/Makefile
A       lib
M       src/shared/Makefile
A  +    bin
===============================================================================
New Checkin: mlevy
Date:        06 Feb 2013
Summary:     Updated the two Makefiles to play nice together. For the standalone
             driver, both Makefiles should get compiler info from .CVMix_env and
             compiler flag info from CompilerFlags.mak (to ensure everything is
             build consistently).

             This is kind of a partial commit -- everything builds correctly and
             the standalone driver links libcvmix.a rather than building modules
             from src/shared/ directly, but there is a lot organization stuff
             that needs to be done:

             * move Makefile from bld/ to src/
             * build executable in bin/ (which doesn't exist yet) rather than
               bld/exe/
             * build libcvmix.a in lib/ (which doesn't exist yet) rather than
               src/shared/
             * Change some variable names to be consistent with how Makefiles
               usually work (FFLAGS instead of COMPILER_FLAGS), adding the
               keyword DIR to variables that are directory names, etc

Files Modified:
A       bld/CompileFlags.mak
M       bld/Makefile
M       src/shared/Makefile
===============================================================================
New Checkin: mlevy
Date:        05 Feb 2013
Summary:     Made variable names in shear mixing module more descriptive.

Files Modified:
M       reg_tests/shear-KPP/input.nl
M       src/shared/cvmix_kinds_and_types.F90
M       src/shared/cvmix_shear.F90
M       src/drivers/cvmix_KPP-shear_driver.F90
===============================================================================
New Checkin: mlevy
Date:        25 Jan 2013
Summary:     Removed bounding box from pdf graphics, not needed when using
             pdflatex.

Files Modified:
M       manual/cvmix_elements.tex
M       manual/cvmix_background.tex
M       manual/cvmix_kpp.tex
M       manual/cvmix_intro.tex
===============================================================================
New Checkin: mlevy
Date:        24 Jan 2013
Summary:     Some changes to aid in building the manual. Note that I have trouble
             using latex, but can build fine with pdflatex. So I added some
             bounding boxes to figures that may not actually be necessary...
             Other changes:

             1) Griffies_refs.bib was missing an entry defining JC as Journal
                of Climate
             2) Added bibliography file (.bbl) to repo so you don't need to
                run bibtex unless you change a reference
             3) The label "inifinitesimal-delta-rho-elements-upwards" was used
                twice in cvmix_elements.tex, so I changed the first occurance
                to "...1" and the second to "...2".
             4) Set up the svn:ignore property on the manual directory. At
                present, I am not ignoring pdf files... though I think in the
                future it might be wise to put cvmix.pdf in the doc/ directory
                in the repository so people who don't want to edit the document
                can find it in the same place as the protex document.

Files Modified:
 M      manual
M       manual/cvmix_elements.tex
M       manual/references/Griffies_refs.bib
A       manual/cvmix.bbl
M       manual/cvmix_background.tex
M       manual/cvmix_dissipation.tex
M       manual/cvmix_kpp.tex
M       manual/cvmix_intro.tex
M       manual/cvmix_convection.tex
===============================================================================
New Checkin: mlevy
Date:        22 Jan 2013
Summary:     Update Makefile to turn warnings into errors for gfortran and
             ifort. Other compilers coming at some point?

Files Modified:
M       bld/Makefile
===============================================================================
New Checkin: sgriffies
Date:        22 Jan 2013
Summary:     Added directory /manual with Latex and associated
             documentation now under version control.

Files Modified:
Sending        ChangeLog
Adding         manual
Adding         manual/cvmix.tex
Adding  (bin)  manual/cvmix_21jan2013.pdf
Adding         manual/cvmix_background.tex
Adding         manual/cvmix_convection.tex
Adding         manual/cvmix_ddiff.tex
Adding         manual/cvmix_dissipation.tex
Adding         manual/cvmix_elements.tex
Adding         manual/cvmix_intro.tex
Adding         manual/cvmix_kpp.tex
Adding         manual/cvmix_shear.tex
Adding         manual/cvmix_tidal.tex
Adding         manual/figs
Adding  (bin)  manual/figs/LargeKPP_fig1.pdf
Adding  (bin)  manual/figs/LargeKPP_fig2.pdf
Adding  (bin)  manual/figs/LargeKPP_figB1.pdf
Adding  (bin)  manual/figs/OceanProcSchem_revision3.png
Adding  (bin)  manual/figs/bl_diffusivity.pdf
Adding  (bin)  manual/figs/bryan_lewis.pdf
Adding  (bin)  manual/figs/bryan_lewis_cm2p1.pdf
Adding  (bin)  manual/figs/phi_m_profiles.pdf
Adding  (bin)  manual/figs/phi_s_profiles.pdf
Adding  (bin)  manual/figs/prandtl_profiles_just_phim_new.pdf
Adding  (bin)  manual/figs/prandtl_profiles_phim_phis.pdf
Adding         manual/mfpic_figs
Adding  (bin)  manual/mfpic_figs/B_grid.pdf
Adding         manual/mfpic_figs/B_grid.tex
Adding  (bin)  manual/mfpic_figs/C_grid.pdf
Adding         manual/mfpic_figs/C_grid.tex
Adding  (bin)  manual/mfpic_figs/cvmix_discrete_vertical.pdf
Adding         manual/mfpic_figs/cvmix_discrete_vertical.tex
Adding  (bin)  manual/mfpic_figs/cvmix_flow_diagram.pdf
Adding  (bin)  manual/mfpic_figs/cvmix_flow_diagram.pdfcrop.pdf
Adding         manual/mfpic_figs/cvmix_flow_diagram.tex
Adding  (bin)  manual/mfpic_figs/cvmix_kpp_boundary_layer.pdf
Adding         manual/mfpic_figs/cvmix_kpp_boundary_layer.tex
Adding  (bin)  manual/mfpic_figs/cvmix_stability.pdf
Adding         manual/mfpic_figs/cvmix_stability.tex
Adding         manual/mfpic_figs/cvmix_stabilityA.tex
Adding         manual/mfpic_figs/cvmix_stabilityB.tex
Adding         manual/mfpic_figs/cvmix_stabilityC.tex
Adding  (bin)  manual/mfpic_figs/cvmix_stability_nonlocal.pdf
Adding         manual/mfpic_figs/cvmix_stability_nonlocal.tex
Adding         manual/references
Adding         manual/references/Griffies_refs.bib
Adding         manual/references/elsarticle-harv.bst
Adding         manual/styles
Adding         manual/styles/Griffies_style.sty
Adding         manual/styles/fncychap.sty
===============================================================================
New Checkin: mlevy
Date:        16 Jan 2013
Summary:     Big overhaul of the code: renamed all vmix_ variables, data types,
             and file names to cvmix_. Same for Vmix_. This also required
             updating the makefile and the run scripts for every regression
             test, plus I updated the protex documentation.

Files Modified:
M       reg_tests/tidal-Simmons/Simmons-test.sh
M       reg_tests/double_diff/double_diff-test.sh
M       reg_tests/shear-KPP/Large_test.sh
M       reg_tests/Bryan-Lewis/BL_test.sh
M       bld/Makefile
M       doc/protex_documentation.pdf
M       doc/make_protex_file
D       src/vmix_output.F90
A  +    src/cvmix_output.F90
D       src/shared/vmix_background.F90
A  +    src/shared/cvmix_ddiff.F90
A  +    src/shared/cvmix_tidal.F90
A  +    src/shared/cvmix_kinds_and_types.F90
D       src/shared/vmix_shear.F90
A  +    src/shared/cvmix_background.F90
A  +    src/shared/cvmix_shear.F90
D       src/shared/vmix_put_get.F90
D       src/shared/vmix_convection.F90
A  +    src/shared/cvmix_convection.F90
A  +    src/shared/cvmix_put_get.F90
D       src/shared/vmix_ddiff.F90
D       src/shared/vmix_tidal.F90
D       src/shared/vmix_kinds_and_types.F90
A  +    src/drivers/cvmix_BL_driver-mem_copy.F90
D       src/drivers/vmix_KPP-shear_driver.F90
D       src/drivers/vmix_ddiff_driver.F90
A  +    src/drivers/cvmix_KPP-shear_driver.F90
D       src/drivers/vmix_BL_driver-pointers.F90
A  +    src/drivers/cvmix_ddiff_driver.F90
D       src/drivers/vmix_Simmons-tidal_driver.F90
A  +    src/drivers/cvmix_BL_driver-pointers.F90
D       src/drivers/vmix_BL_driver-mem_copy.F90
A  +    src/drivers/cvmix_Simmons-tidal_driver.F90
===============================================================================
New Checkin: sgriffies
Date:        16 Jan 2013
Summary:     Modify some of the comments.

Files Modified:
M       src/shared/vmix_background.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_convection.F90
===============================================================================
New Checkin: mlevy
Date:        14 Jan 2013
Summary:     Huge cleanup of Makefile, now only builds object files for modules
             that are actually used by specified driver. At some point we really
             need to automate the dependency process, but I think this is a step
             in the right direction.

Files Modified:
M       bld/Makefile
===============================================================================
New Checkin: mlevy
Date:        14 Jan 2013
Summary:     Add mostly-blank template for double diffusion mixing module /
             driver. Only tested with gfortran, hopefully no new warnings from
             other compilers. Also cleaned up some formatting in the tidal
             module / driver.

Files Modified:
A       reg_tests/double_diff
A       reg_tests/double_diff/input.nl
A       reg_tests/double_diff/double_diff-test.sh
M       bld/Makefile
A       src/shared/vmix_ddiff.F90
M       src/shared/vmix_tidal.F90
M       src/shared/vmix_kinds_and_types.F90
A       src/drivers/vmix_ddiff_driver.F90
M       src/drivers/vmix_Simmons-tidal_driver.F90
===============================================================================
New Checkin: mlevy
Date:        14 Jan 2013
Summary:     Add mostly-blank template for tidal mixing module / driver. Only
             tested with gfortran, hopefully no new warnings from other
             compilers.

Files Modified:
A       reg_tests/tidal-Simmons
A       reg_tests/tidal-Simmons/input.nl
A       reg_tests/tidal-Simmons/Simmons-test.sh
M       bld/Makefile
A       src/shared/vmix_tidal.F90
M       src/shared/vmix_kinds_and_types.F90
A       src/drivers/vmix_Simmons-tidal_driver.F90
===============================================================================
New Checkin: mlevy
Date:        12 Dec 2012
Summary:     Updated Makefile to (hopefully) handle netCDF / HDF5 correctly.
             Can now compile with netCDF + NAH compiler (netCDF there does
						 use HDF5).

Files Modified:
M       bld/Makefile
===============================================================================
New Checkin: mlevy
Date:        5 Dec 2012
Summary:     A couple minor tweaks
             1) vmix_output and all three drivers were missing the "only" from
                use statements
             2) vmix_BL_driver* doesn't need anything from vmix_convection,
                so I removed the use statement and fixed the Makefile
             3) some formatting changes in src/share for protex documentation

Files Modified:
M       bld/Makefile
M       src/vmix_output.F90
M       src/shared/vmix_background.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_put_get.F90
M       src/drivers/vmix_KPP-shear_driver.F90
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        4 Dec 2012
Summary:     Updated Makefile to handle IBM compiler correctly.

Files Modified:
M       bld/Makefile
===============================================================================
New Checkin: mlevy
Date:        4 Dec 2012
Summary:     Added support for NAG compiler, cleaned up warnings. Note that
             CVMix current compiles warning-free with gfortran, intel, PGI,
						 and NAG. (Haven't checked IBM compiler recently.)

Files Modified:
M       bld/Makefile
M       src/vmix_output.F90
M       src/shared/vmix_background.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_put_get.F90
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        4 Dec 2012
Summary:     Added vmix_put routines for the background parameterization, the
             Bryan-Lewis parameterization now uses these routines. Besides
             adding the new routines, I also needed to update the build system
             since vmix_background now uses vmix_put_get. Also, I realized the
             routine vmix_init_bkgnd did not need to be passed ncol and colid
             so I updated the vmix_BL drivers. Lastly, I rebuilt the protex
             documentation since a lot has changed since the last version.

Files Modified:
M       bld/Makefile
M       doc/protex_documentation.pdf
A       doc/header
M       doc/make_protex_file
M       src/shared/vmix_background.F90
M       src/shared/vmix_put_get.F90
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        3 Dec 2012
Summary:     Avoid warning about write format on intel compiler

Files Modified:
M       src/vmix_output.F90
===============================================================================
New Checkin: mlevy
Date:        3 Dec 2012
Summary:     Removed T / U grid variables, improved ascii output (no trailing
             spaces at the end of lines)

Files Modified:
M       src/vmix_output.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_kinds_and_types.F90
M       src/drivers/vmix_KPP-shear_driver.F90
===============================================================================
New Checkin: mlevy
Date:        3 Dec 2012
Summary:     Bug-fix in setup routine (prompted for netcdf/include twice)

Files Modified:
M       bld/setup
===============================================================================
New Checkin: mlevy
Date:        3 Dec 2012
Summary:     New output routines don't require storing Ri in z_iface for shear
             test.

Files Modified:
M       src/vmix_output.F90
M       src/drivers/vmix_KPP-shear_driver.F90
===============================================================================
New Checkin: mlevy
Date:        2 Dec 2012
Summary:     Adding "clean" flag to reg_test scripts, only outputting one file
             for netCDF output of Bryan-Lewis tests.

Files Modified:
M       reg_tests/shear-KPP/Large_test.sh
M       reg_tests/Bryan-Lewis/BL_test.sh
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        2 Dec 2012
Summary:     Bug-fix -- I didn't mean to hard-code in ncol_id=2 for output

Files Modified:
M       src/vmix_output.F90
===============================================================================
New Checkin: mlevy
Date:        2 Dec 2012
Summary:     Overhaul of the output routines, now all writing is done from one
             of two routines (single_col or multi_col) and variables to be
             written are also an argument sent to vmix_output_write(). As the
             drivers evolve, this will make it easier to add variables to the
             output stream.

Files Modified:
M       reg_tests/shear-KPP/plot_visc_coeffs.ncl
M       doc/protex_documentation.pdf
M       src/vmix_output.F90
M       src/drivers/vmix_KPP-shear_driver.F90
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        1 Dec 2012
Summary:     Updated the README file, renamed shear-KPP test script and the
             PS file generated by the NCL script.

Files Modified:
D       reg_tests/shear-KPP/KPP_test.sh
M       reg_tests/shear-KPP/plot_visc_coeffs.ncl
A  +    reg_tests/shear-KPP/Large_test.sh
M       README
===============================================================================
New Checkin: mlevy
Date:        1 Dec 2012
Summary:     Update NCL scripts to read in netCDF data (if available), ascii
             data otherwise. Scripts report error if neither file is found.
             Also, for shear-KPP test we are plotting viscosity coefficients.

Files Modified:
A  +    reg_tests/shear-KPP/plot_visc_coeffs.ncl
D       reg_tests/shear-KPP/plot_diff_coeffs.ncl
M       reg_tests/Bryan-Lewis/plot_diff_coeffs.ncl
===============================================================================
New Checkin: mlevy
Date:        1 Dec 2012
Summary:     New driver to test shear-KPP, can recreate figure 3 from Large et
             al. Required some tweaks to Makefile, adding new routines to
             vmix_output, and fixing some bugs in vmix_shear.

Files Modified:
A       reg_tests/shear-KPP
A       reg_tests/shear-KPP/KPP_test.sh
A       reg_tests/shear-KPP/plot_diff_coeffs.ncl
A       reg_tests/shear-KPP/input.nl
 M      reg_tests/Bryan-Lewis
M       bld/Makefile
M       doc/protex_documentation.pdf
M       doc/make_protex_file
M       src/vmix_output.F90
M       src/shared/vmix_shear.F90
A       src/drivers/vmix_KPP-shear_driver.F90
===============================================================================
New Checkin: mlevy
Date:        1 Dec 2012
Summary:     Added shear mixing from Large et al to vmix_shear, also updated
             protex documentation to include new mixing (as well as details on
             PP mixing) and to start documentation for each module on a new
             page. Next step will be to build a driver to test Large et al
             mixing, trying to recreate Figure 3 from the paper.

Files Modified:
M       doc/protex_documentation.pdf
M       src/vmix_output.F90
M       src/shared/vmix_background.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_put_get.F90
M       src/shared/vmix_convection.F90
M       src/shared/vmix_kinds_and_types.F90
===============================================================================
New Checkin: mlevy
Date:        13 Nov 2012
Summary:     Formatting for protex documentation (next commit will be new PDF)

Files Modified:
M       doc/make_protex_file
M       src/vmix_output.F90
M       src/shared/vmix_background.F90
M       src/shared/vmix_shear.F90
M       src/shared/vmix_put_get.F90
M       src/shared/vmix_convection.F90
M       src/shared/vmix_kinds_and_types.F90
M       src/drivers/vmix_BL_driver-pointers.F90
M       src/drivers/vmix_BL_driver-mem_copy.F90
===============================================================================
New Checkin: mlevy
Date:        12 Nov 2012
Summary:     gfortran barked about declaring pointers inside datatypes
             (something I meant to remove before committing -- the IBM compiler
             is okay with it, but I'm not using pointers there anyway)

Files Modified:
M       src/shared/vmix_kinds_and_types.F90

===============================================================================
New Checkin: mlevy
Date:        12 Nov 2012
Summary:     Added vmix_shear.F90, I think the structure is there for PP mixing
             (will test in POP, but that requires more POP infrastructure
             changes). New tag coming after POP work is complete.

Files Modified:
A       src/shared/vmix_shear.F90
M       src/shared/vmix_kinds_and_types.F90

===============================================================================
New Checkin: mlevy
Date:        5 Nov 2012
Summary:     Updated makefile to error out if VMIX_DRIVER is not found.

Files Modified:
M       bld/Makefile

===============================================================================
New Checkin: mlevy
Date:        16 Oct 2012
Summary:     Updated makefile to use proper tags for xlf90 compiler

Files Modified:
M       bld/Makefile

===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    30 Sep 2012
Tag Name:    cvmix_20120930
Tag Summary: A lot of restructuring / one new feature. The executable is now
             build in $CVMix/bld/exe/ instead of $CVMix/exe/; there are now
             multiple stand-alone drivers, and you must specify which one to
             use when you build the code. All the *.o and *.mod files are put
             in $CVMix/bld/obj/, rather than the .o files in $CVMix/bld/ and
             the .mod files in whatever directory you ran `make` from. If you
             have protex installed, you can generate the in-source protex
             documentation by running `$CVMix/doc/make_protex_file`. I also
             deleted the $CVMix/ncl/ directory in favor of keeping the ncl
             files in the reg_tests/ subdirectory that actually calls them.

             Feature: vmix_output.F90 now handles outputting data to disk, and
             both stand-alone drivers use the vmix_output routines. At present,
             can output either netCDF or ascii; the netCDF writing routines need
             error checking / better interfaces (currently only write the
             diffusivity coefficient, no check to see what dimensions were
             previously defined).

             Minor changes: updated the svn:keywords property on the source
             code to include Id and URL. Also updated svn:ignore on $CVMix/bld
             to account for moving the .o and .mod files into $CVMix/bld/obj.

Files Modified:
D    exe
D    ncl
A    reg_tests/Bryan-Lewis
A    reg_tests/Bryan-Lewis/BL_test.sh
A    reg_tests/Bryan-Lewis/plot_diff_coeffs.ncl
A    reg_tests/Bryan-Lewis/input.nl
M    bld/setup
A    bld/exe
A    bld/obj
M    bld/README
M    bld/Makefile
 M   bld
M    doc/protex_documentation.pdf
A    doc/make_protex_file
D    src/vmix_driver.F90
MM   src/vmix_output.F90
MM   src/shared/vmix_background.F90
MM   src/shared/vmix_put_get.F90
MM   src/shared/vmix_convection.F90
MM   src/shared/vmix_kinds_and_types.F90
A    src/drivers
A    src/drivers/vmix_BL_driver-pointers.F90
A    src/drivers/vmix_BL_driver-mem_copy.F90
M    README
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    13 Sep 2012
Tag Name:    cvmix_20120913
Tag Summary: Started repository for stand-alone CVMix. This tag is the first
             to use pointers rather than allocatable arrays for the mixing
             coefficients / column parameters (depth, interface depth, etc).
             This is also the first tag that uses $CVMix/bld/setup (a python
             script) to store environment variables needed for the build.

             Minor changes: updated the svn:ignore property on a couple of
             directories to ignore the CVMix executable, .o and .mod files,
             and any graphics output from the NCL scripts.

Files Modified:
D    old.tmp
M    bld/setup
 M   bld
 M   exe
M    src/shared/vmix_put_get.F90
M    src/shared/vmix_kinds_and_types.F90
M    src/vmix_driver.F90
 M   ncl
